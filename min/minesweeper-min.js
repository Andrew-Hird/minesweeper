function startGame(){for(var o=0;board.cells[o];o++)board.cells[o].surroundingMines=countSurroundingMines(board.cells[o]);lib.initBoard(),document.addEventListener("click",checkForWin),document.addEventListener("contextmenu",checkForWin)}function checkForWin(){for(var o=0;o<board.cells.length;o++){if(!board.cells[o].isMine&&board.cells[o].hidden)return;if(!board.cells[o].isMarked&&board.cells[o].hidden)return}lib.displayMessage('You win! <br> <button onClick="history.go(0)">Play Again?</button>')}function countSurroundingMines(o){for(var e=lib.getSurroundingCells(o.row,o.col),n=0,r=0;r<e.length;r++)e[r].isMine===!0&&(n+=1);return n}document.addEventListener("DOMContentLoaded",startGame);for(var mark=document.getElementById("mark"),bomb=document.getElementById("bomb"),clap=document.getElementById("clap"),boardSize=4,board={cells:[]},row=0;boardSize>row;row++)for(var col=0;boardSize>col;col++){var obj={};obj.row=row,obj.col=col,obj.isMine=Math.random()<.3?!0:!1,obj.hidden=!0,board.cells.push(obj)}