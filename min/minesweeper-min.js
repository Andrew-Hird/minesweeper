function startGame(){for(var o=0;board.cells[o];o++)board.cells[o].surroundingMines=countSurroundingMines(board.cells[o]);lib.initBoard(),document.addEventListener("click",checkForWin),document.addEventListener("contextmenu",checkForWin)}function checkForWin(){for(var o=0;o<board.cells.length;o++){if(!board.cells[o].isMine&&board.cells[o].hidden)return;if(!board.cells[o].isMarked&&board.cells[o].hidden)return}lib.displayMessage('You win! <br> <button onClick="history.go(0)">Play Again?</button>')}function countSurroundingMines(o){for(var r=lib.getSurroundingCells(o.row,o.col),e=0,n=0;n<r.length;n++)r[n].isMine===!0&&(e+=1);return e}document.addEventListener("DOMContentLoaded",startGame);for(var boardSize=4,board={cells:[]},row=0;boardSize>row;row++)for(var col=0;boardSize>col;col++){var obj={};obj.row=row,obj.col=col,obj.isMine=Math.random()<.3?!0:!1,obj.hidden=!0,board.cells.push(obj)}