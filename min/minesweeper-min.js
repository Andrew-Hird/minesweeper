function startGame(){for(var e=0;board.cells[e];e++)board.cells[e].surroundingMines=countSurroundingMines(board.cells[e]);lib.initBoard(),document.addEventListener("click",checkForWin),document.addEventListener("contextmenu",checkForWin)}function checkForWin(){for(var e=0;e<board.cells.length;e++){if(!board.cells[e].isMine&&board.cells[e].hidden)return;if(!board.cells[e].isMarked&&board.cells[e].hidden)return}lib.displayMessage('You win! <br> <button onClick="history.go(0)">Play Again?</button>')}function countSurroundingMines(e){for(var o=lib.getSurroundingCells(e.row,e.col),n=0,r=0;r<o.length;r++)o[r].isMine===!0&&(n+=1);return n}document.addEventListener("DOMContentLoaded",startGame);for(var mark=document.getElementById("mark"),mine=document.getElementById("mine"),clap=document.getElementById("clap"),boardSize=4,board={cells:[]},row=0;boardSize>row;row++)for(var col=0;boardSize>col;col++){var obj={};obj.row=row,obj.col=col,obj.isMine=Math.random()<.3?!0:!1,obj.hidden=!0,board.cells.push(obj)}document.addEventListener(click,mine.play());